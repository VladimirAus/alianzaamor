aa_core.to_deliver:
  path: '/to-deliver/{node}/{user}'
  defaults:
    _controller: '\Drupal\aa_core\Controller\DeliveryController::updateDelivery'
  requirements:
    # @TODO: update permission for team leaders.
    # We should create a custom permission.
    _permission: 'deliver food'
    node: \d+
    user: \d+
    _csrf_token: 'TRUE'

aa_core.delivery_confirm:
  path: '/user/delivery/{node}/confirm/{user}'
  defaults:
    _controller: '\Drupal\aa_core\Controller\DeliveryController::updateDelivery'
    field_name: 'field_users_check_in'
  requirements:
    _entity_access: 'user.view'
    node: \d+
    user: \d+
    _csrf_token: 'TRUE'

aa_core.delivery_reject:
  path: '/user/delivery/{node}/reject/{user}'
  defaults:
    _controller: '\Drupal\aa_core\Controller\DeliveryController::updateDelivery'
    field_name: 'field_users_opt_out'
  requirements:
    _entity_access: 'user.view'
    node: \d+
    user: \d+
    _csrf_token: 'TRUE'

aa_core.import_users:
  path: '/node/{node}/edit/import-users'
  defaults:
    _form: '\Drupal\aa_core\Form\NodeImportUsersForm'
    _title: 'Bulk import users'
  options:
    parameters:
      node:
        type: entity:node
  requirements:
    _custom_access: '\Drupal\aa_core\Form\NodeImportUsersForm::checkAccess'
    # @TODO: update permission for team leaders.
    # We should create a custom permission.
    _permission: 'deliver food'
    node: \d+
